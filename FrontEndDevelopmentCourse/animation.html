<!DOCTYPE html>
<html lang="en">
  <body>
    <div id="root" style="position: absolute; height: 1000px">Animate me!</div>

    <script type="application/javascript">
      const rectangle = document.querySelector("#root");

      let leftPosition = 0;

      function animateDiv() {
        console.log(`Start animateDiv ${leftPosition}`);

        leftPosition += 1;

        rectangle.style.left = `${leftPosition}px`;

        if (leftPosition < 200) {
          console.log(`Before animateDiv`);
          // animateDiv();
          requestAnimationFrame(animateDiv);
          console.log(`After animateDiv`);
        }

        console.log(`End animateDiv`);
      }

      requestAnimationFrame(animateDiv);
    </script>
  </body>
</html>

<!-- 
  The "Animate me!" text now moves smoothly across the page. 
  You can also scroll the page up and down during the animation. 
  Next, look at the browser's console and notice that the order of the 
  console.log() statements has changed. 
  
  This is because requestAnimationFrame() is an asynchronous function that 
  allows the browser to repaint the screen between calls to animateDiv().
 -->